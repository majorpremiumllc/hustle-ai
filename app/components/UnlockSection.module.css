/* ═══════════════════════════════════════════════
   Neural De-blur Reveal — Styles
   ─────────────────────────────────────────────
   ARCHITECTURE:
   .section          position:relative container (NO filter ever)
   └ children        sharp content (always visible, never blurred)
   └ .frost          position:absolute overlay with backdrop-filter
                     masked via CSS mask-image → reveals content
   └ .revealEdge     soft glow at the mask boundary
   ═══════════════════════════════════════════════ */

/* ── Section Container ────────────────── */
.section {
    position: relative;
    /* CRITICAL: No filter, no blur, no opacity on this element */
}

/* ── Frost Overlay ────────────────────── */
.frost {
    position: absolute;
    inset: 0;
    z-index: 8;
    pointer-events: none;
    border-radius: inherit;

    /* The blur + tint */
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    background: rgba(10, 10, 20, 0.35);

    /* ── THE MASK — This is the magic ────
     transparent = overlay hidden → sharp content visible
     black = overlay visible → content appears frosted
     The gradient slides downward as --reveal goes 0→1 */
    -webkit-mask-image: linear-gradient(to bottom,
            transparent 0%,
            transparent calc(var(--reveal, 0) * 115% - 12%),
            rgba(0, 0, 0, 0.3) calc(var(--reveal, 0) * 115% - 4%),
            rgba(0, 0, 0, 0.7) calc(var(--reveal, 0) * 115%),
            black calc(var(--reveal, 0) * 115% + 6%),
            black 100%);
    mask-image: linear-gradient(to bottom,
            transparent 0%,
            transparent calc(var(--reveal, 0) * 115% - 12%),
            rgba(0, 0, 0, 0.3) calc(var(--reveal, 0) * 115% - 4%),
            rgba(0, 0, 0, 0.7) calc(var(--reveal, 0) * 115%),
            black calc(var(--reveal, 0) * 115% + 6%),
            black 100%);

    /* Smooth mask movement (tiny delay so not every frame) */
    transition: -webkit-mask-image 0.08s linear,
        mask-image 0.08s linear;
}

/* ── Reveal Edge Glow ─────────────────── */
.revealEdge {
    position: absolute;
    left: 0;
    right: 0;
    /* Sits at the mask boundary */
    top: calc(var(--reveal, 0) * 100%);
    height: 60px;
    transform: translateY(-50%);
    background: linear-gradient(to bottom,
            transparent 0%,
            rgba(0, 210, 255, 0.06) 30%,
            rgba(108, 92, 231, 0.04) 50%,
            transparent 100%);
    pointer-events: none;
    opacity: 0.8;
    transition: top 0.1s linear;
}

/* ── Settled (fully revealed) ─────────── */
.settled {
    /* Overlay is already unmounted from DOM,
     but just in case: */
}

.settled .frost {
    display: none !important;
}

/* ── Reduced Motion ──────────────────── */
@media (prefers-reduced-motion: reduce) {
    .frost {
        /* No blur, just a simple opacity overlay that fades */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        -webkit-mask-image: none !important;
        mask-image: none !important;
        background: rgba(10, 10, 20, 0.4);
        transition: opacity 0.5s ease;
    }

    .settled .frost,
    .section[style*="--reveal: 1"] .frost {
        opacity: 0;
    }

    .revealEdge {
        display: none;
    }
}